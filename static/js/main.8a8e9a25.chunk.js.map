{"version":3,"sources":["MovieTabs.js","MovieItem.js","Pagination.js","App.js","api.js","index.js"],"names":["MovieTabs","nextProps","this","props","sort_by","updateSortBy","makeClasses","value","classNames","active","handleClick","className","onClick","React","Component","MovieItem","state","willWatch","movie","title","vote_average","backdrop_path","poster_path","id","src","alt","type","setState","removeMovieFromWillWatch","addMovieToWillWatch","removeMovie","Pagination","page","totalPages","from","to","Array","fill","map","_","idx","calculateStartPage","calculateEndPage","createPageRange","filter","p","updatePage","disabled","createPageButtons","pageBtn","key","App","fetchMovies","fetch","then","res","json","movies","results","total_pages","movieId","item","isSortByChanges","isPageChanges","m","length","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"6NAGqBA,E,oLACGC,GACpB,OAAOC,KAAKC,MAAMC,UAAYH,EAAUG,U,+BAGhC,IAAD,EAC2BF,KAAKC,MAA/BC,EADD,EACCA,QAASC,EADV,EACUA,aACXC,EAAc,SAACC,GAAD,OAClBC,IAAW,MAAO,WAAY,CAAEC,OAAQF,IAAUH,KAC9CM,EAAc,SAACH,GAAD,OAAW,kBAAMF,EAAaE,KAClD,OACE,wBAAII,UAAU,iBACZ,wBAAIA,UAAU,YACZ,4BACEA,UAAWL,EAAY,mBACvBM,QAASF,EAAY,oBAFvB,eAOF,wBAAIC,UAAU,YACZ,4BACEA,UAAWL,EAAY,gBACvBM,QAASF,EAAY,iBAFvB,YAOF,wBAAIC,UAAU,YACZ,4BACEA,UAAWL,EAAY,qBACvBM,QAASF,EAAY,sBAFvB,sB,GA7B6BG,IAAMC,WCDhCC,EAAb,kDACE,aAAe,IAAD,8BACZ,gBACKC,MAAQ,CACXC,WAAW,GAHD,EADhB,qDAQY,IAAD,SAOHf,KAAKC,MAAMe,MALbC,EAFK,EAELA,MACAC,EAHK,EAGLA,aACAC,EAJK,EAILA,cACAC,EALK,EAKLA,YACAC,EANK,EAMLA,GAEF,OACE,yBAAKZ,UAAU,QACb,yBACEA,UAAU,eACVa,IAAG,yCAAoCH,GAAiBC,GACxDG,IAAKN,IAEP,yBAAKR,UAAU,aACb,wBAAIA,UAAU,cAAcQ,GAC5B,uBAAGR,UAAU,mCAAb,WACWS,GAEX,yBAAKT,UAAU,qDACZT,KAAKc,MAAMC,UACV,4BACES,KAAK,SACLf,UAAU,kBACVC,QAAS,WACP,EAAKe,SAAS,CAAEV,WAAW,IAC3B,EAAKd,MAAMyB,yBAAyBL,KALxC,qBAWA,4BACEG,KAAK,SACLf,UAAU,oBACVC,QAAS,WACP,EAAKe,SAAS,CAAEV,WAAW,IAC3B,EAAKd,MAAM0B,oBAAoB,EAAK1B,MAAMe,SAL9C,cAWF,4BACEP,UAAU,iBACVC,QAAS,kBAAM,EAAKT,MAAM2B,YAAYP,KAFxC,iBApDZ,GAA+BV,IAAMC,WCCxBiB,EAAb,mLACwB,IAAD,EACU7B,KAAKC,MAA1B6B,EADW,EACXA,KAAMC,EADK,EACLA,WAEd,OAAa,IAATD,EAAmBA,EACnBA,IAASC,EAAmBD,EAAO,EAChCA,EAAO,IANlB,yCASsB,IAAD,EACY9B,KAAKC,MAA1B6B,EADS,EACTA,KAAMC,EADG,EACHA,WAEd,OAAID,IAASC,EAAmBA,EACnB,IAATD,EAAmBA,EAAO,EACvBA,EAAO,IAdlB,sCAiBkBE,EAAMC,GACpB,OAAOC,MAAMD,EAAKD,EAAO,GACtBG,KAAK,MACLC,KAAI,SAACC,EAAGC,GAAJ,OAAYN,EAAOM,OApB9B,0CAuBuB,IACXP,EAAe/B,KAAKC,MAApB8B,WAEFC,EAAOhC,KAAKuC,qBACZN,EAAKjC,KAAKwC,mBAEhB,OAAOxC,KAAKyC,gBAAgBT,EAAMC,GAAIS,QACpC,SAACC,GAAD,OAAOA,GAAK,GAAKA,GAAKZ,OA9B5B,+BAkCY,IAAD,EACkC/B,KAAKC,MAAtC6B,EADD,EACCA,KAAMC,EADP,EACOA,WAAYa,EADnB,EACmBA,WAE1B,OACE,wBAAInC,UAAU,kCACZ,wBAAIA,UAAWH,IAAW,YAAa,CAAEuC,SAAmB,IAATf,KACjD,4BAAQrB,UAAU,YAAYC,QAAS,kBAAMkC,EAAWd,EAAO,KAA/D,SAID9B,KAAK8C,oBAAoBV,KAAI,SAACW,GAAD,OAC5B,wBACEC,IAAKD,EACLtC,UAAWH,IAAW,YAAa,CAAEC,OAAQwC,IAAYjB,KAEzD,4BAAQrB,UAAU,YAAYC,QAAS,kBAAMkC,EAAWG,KACrDA,OAIP,wBACEtC,UAAWH,IAAW,YAAa,CAAEuC,SAAUf,IAASC,KAExD,4BAAQtB,UAAU,YAAYC,QAAS,kBAAMkC,EAAWd,EAAO,KAA/D,cAzDV,GAAgCnB,IAAMC,WCwHvBqC,EArHf,kDACE,aAAe,IAAD,8BACZ,gBAsBFC,YAAc,WACZC,MAAM,GAAD,OC/Bc,+BD+Bd,mCC7BgB,mCD6BhB,oBACuD,EAAKrC,MAAMZ,QADlE,iBACkF,EAAKY,MAAMgB,OAE/FsB,MAAK,SAACC,GAAD,OAASA,EAAIC,UAClBF,MAAK,gBAAYG,EAAZ,EAAGC,QAAiBC,EAApB,EAAoBA,YAApB,OACJ,EAAKhC,SAAS,CAAE8B,SAAQE,oBA7BhB,EAiCd9B,oBAAsB,SAACX,GACrB,EAAKS,SAAS,CACZV,UAAU,GAAD,mBAAM,EAAKD,MAAMC,WAAjB,CAA4BC,OAnC3B,EAuCdU,yBAA2B,SAACgC,GAC1B,EAAKjC,SAAS,CACZV,UAAW,EAAKD,MAAMC,UAAU2B,QAAO,SAACiB,GAAD,OAAUA,EAAKtC,KAAOqC,QAzCnD,EA6Cd9B,YAAc,SAAC8B,GACb,EAAKhC,yBAAyBgC,GAC9B,EAAKjC,SAAS,CACZ8B,OAAQ,EAAKzC,MAAMyC,OAAOb,QAAO,SAACiB,GAAD,OAAUA,EAAKtC,KAAOqC,QAhD7C,EAoDdvD,aAAe,SAACD,GACd,EAAKuB,SAAS,CAAEvB,aArDJ,EAwDd0C,WAAa,SAACd,GACZ,EAAKL,SAAS,CAAEK,UAvDhB,EAAKhB,MAAQ,CACXyC,OAAQ,GACRxC,UAAW,GACXb,QAAS,kBACT4B,KAAM,EACN2B,YAAa,MAPH,EADhB,gEAaIzD,KAAKkD,gBAbT,yCAgBqBb,EAhBrB,GAgB4C,IAAlBnC,EAAiB,EAAjBA,QAAS4B,EAAQ,EAARA,KACzB8B,EAAkB1D,IAAYF,KAAKc,MAAMZ,QACzC2D,EAAgB/B,IAAS9B,KAAKc,MAAMgB,KAEtC8B,GAAiB5D,KAAKyB,SAAS,CAAEK,KAAM,KACvC8B,GAAmBC,IAAe7D,KAAKkD,gBArB/C,+BA6DY,IAAD,OACP,OACE,yBAAKzC,UAAU,aACb,yBAAKA,UAAU,YACb,yBAAKA,UAAU,UACb,yBAAKA,UAAU,YACb,yBAAKA,UAAU,UACb,kBAAC,EAAD,CACEP,QAASF,KAAKc,MAAMZ,QACpBC,aAAcH,KAAKG,iBAIzB,yBAAKM,UAAU,YACb,yBAAKA,UAAU,SAAf,8EACkBT,KAAKc,MAAM2C,aAE7B,yBAAKhD,UAAU,SACb,kBAAC,EAAD,CACEqB,KAAM9B,KAAKc,MAAMgB,KACjBC,WAAY/B,KAAKc,MAAM2C,YACvBb,WAAY5C,KAAK4C,eAIvB,yBAAKnC,UAAU,OACZT,KAAKc,MAAMyC,OAAOnB,KAAI,SAAC0B,GAAD,OACrB,yBAAKrD,UAAU,aAAauC,IAAKc,EAAEzC,IACjC,kBAAC,EAAD,CACEL,MAAO8C,EACPlC,YAAa,EAAKA,YAClBD,oBAAqB,EAAKA,oBAC1BD,yBAA0B,EAAKA,iCAMzC,yBAAKjB,UAAU,SACb,2CAAiBT,KAAKc,MAAMC,UAAUgD,QACtC,wBAAItD,UAAU,cACXT,KAAKc,MAAMC,UAAUqB,KAAI,SAAC0B,GAAD,OACxB,wBAAId,IAAKc,EAAEzC,GAAIZ,UAAU,mBACvB,yBAAKA,UAAU,kCACZqD,EAAE7C,mBAzGvB,GAAyBN,IAAMC,WEA/BoD,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,U","file":"static/js/main.8a8e9a25.chunk.js","sourcesContent":["import React from 'react';\nimport classNames from 'classnames';\n\nexport default class MovieTabs extends React.Component {\n  shouldComponentUpdate(nextProps) {\n    return this.props.sort_by !== nextProps.sort_by;\n  }\n\n  render() {\n    const { sort_by, updateSortBy } = this.props;\n    const makeClasses = (value) =>\n      classNames('btn', 'nav-link', { active: value === sort_by });\n    const handleClick = (value) => () => updateSortBy(value);\n    return (\n      <ul className=\"nav nav-pills\">\n        <li className=\"nav-item\">\n          <button\n            className={makeClasses('popularity.desc')}\n            onClick={handleClick('popularity.desc')}\n          >\n            Popularity\n          </button>\n        </li>\n        <li className=\"nav-item\">\n          <button\n            className={makeClasses('revenue.desc')}\n            onClick={handleClick('revenue.desc')}\n          >\n            Revenue\n          </button>\n        </li>\n        <li className=\"nav-item\">\n          <button\n            className={makeClasses('vote_average.desc')}\n            onClick={handleClick('vote_average.desc')}\n          >\n            Vote average\n          </button>\n        </li>\n      </ul>\n    );\n  }\n}\n","import React from 'react';\n\nexport class MovieItem extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      willWatch: false,\n    };\n  }\n\n  render() {\n    const {\n      title,\n      vote_average,\n      backdrop_path,\n      poster_path,\n      id,\n    } = this.props.movie;\n    return (\n      <div className=\"card\">\n        <img\n          className=\"card-img-top\"\n          src={`https://image.tmdb.org/t/p/w500${backdrop_path || poster_path}`}\n          alt={title}\n        />\n        <div className=\"card-body\">\n          <h6 className=\"card-title\">{title}</h6>\n          <p className=\"mb-2 d-flex justify-content-end\">\n            Rating: {vote_average}\n          </p>\n          <div className=\"d-flex justify-content-between align-items-center\">\n            {this.state.willWatch ? (\n              <button\n                type=\"button\"\n                className=\"btn btn-success\"\n                onClick={() => {\n                  this.setState({ willWatch: false });\n                  this.props.removeMovieFromWillWatch(id);\n                }}\n              >\n                Remove Will Watch\n              </button>\n            ) : (\n              <button\n                type=\"button\"\n                className=\"btn btn-secondary\"\n                onClick={() => {\n                  this.setState({ willWatch: true });\n                  this.props.addMovieToWillWatch(this.props.movie);\n                }}\n              >\n                Will Watch\n              </button>\n            )}\n            <button\n              className=\"btn btn-danger\"\n              onClick={() => this.props.removeMovie(id)}\n            >\n              Delete\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport classNames from 'classnames';\n\nexport class Pagination extends React.Component {\n  calculateStartPage() {\n    const { page, totalPages } = this.props;\n\n    if (page === 1) return page;\n    if (page === totalPages) return page - 2;\n    return page - 1;\n  }\n\n  calculateEndPage() {\n    const { page, totalPages } = this.props;\n\n    if (page === totalPages) return totalPages;\n    if (page === 1) return page + 2;\n    return page + 1;\n  }\n\n  createPageRange(from, to) {\n    return Array(to - from + 1)\n      .fill(null)\n      .map((_, idx) => from + idx);\n  }\n\n  createPageButtons() {\n    const { totalPages } = this.props;\n\n    const from = this.calculateStartPage();\n    const to = this.calculateEndPage();\n\n    return this.createPageRange(from, to).filter(\n      (p) => p >= 1 && p <= totalPages\n    );\n  }\n\n  render() {\n    const { page, totalPages, updatePage } = this.props;\n\n    return (\n      <ul className=\"pagination justify-content-end\">\n        <li className={classNames('page-item', { disabled: page === 1 })}>\n          <button className=\"page-link\" onClick={() => updatePage(page - 1)}>\n            &laquo;\n          </button>\n        </li>\n        {this.createPageButtons().map((pageBtn) => (\n          <li\n            key={pageBtn}\n            className={classNames('page-item', { active: pageBtn === page })}\n          >\n            <button className=\"page-link\" onClick={() => updatePage(pageBtn)}>\n              {pageBtn}\n            </button>\n          </li>\n        ))}\n        <li\n          className={classNames('page-item', { disabled: page === totalPages })}\n        >\n          <button className=\"page-link\" onClick={() => updatePage(page + 1)}>\n            &raquo;\n          </button>\n        </li>\n      </ul>\n    );\n  }\n}\n","import React from 'react';\nimport MovieTabs from './MovieTabs';\nimport { MovieItem } from './MovieItem';\nimport { Pagination } from './Pagination';\nimport { API_URL, API_KEY_3 } from './api';\n\nexport class App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      movies: [],\n      willWatch: [],\n      sort_by: 'popularity.desc',\n      page: 1,\n      total_pages: null,\n    };\n  }\n\n  componentDidMount() {\n    this.fetchMovies();\n  }\n\n  componentDidUpdate(_, { sort_by, page }) {\n    const isSortByChanges = sort_by !== this.state.sort_by;\n    const isPageChanges = page !== this.state.page;\n\n    if (isSortByChanges) this.setState({ page: 1 });\n    if (isSortByChanges || isPageChanges) this.fetchMovies();\n  }\n\n  fetchMovies = () => {\n    fetch(\n      `${API_URL}/discover/movie?api_key=${API_KEY_3}&sort_by=${this.state.sort_by}&page=${this.state.page}`\n    )\n      .then((res) => res.json())\n      .then(({ results: movies, total_pages }) =>\n        this.setState({ movies, total_pages })\n      );\n  };\n\n  addMovieToWillWatch = (movie) => {\n    this.setState({\n      willWatch: [...this.state.willWatch, movie],\n    });\n  };\n\n  removeMovieFromWillWatch = (movieId) => {\n    this.setState({\n      willWatch: this.state.willWatch.filter((item) => item.id !== movieId),\n    });\n  };\n\n  removeMovie = (movieId) => {\n    this.removeMovieFromWillWatch(movieId);\n    this.setState({\n      movies: this.state.movies.filter((item) => item.id !== movieId),\n    });\n  };\n\n  updateSortBy = (sort_by) => {\n    this.setState({ sort_by });\n  };\n\n  updatePage = (page) => {\n    this.setState({ page });\n  };\n\n  render() {\n    return (\n      <div className=\"container\">\n        <div className=\"row mt-4\">\n          <div className=\"col-10\">\n            <div className=\"row mb-4\">\n              <div className=\"col-12\">\n                <MovieTabs\n                  sort_by={this.state.sort_by}\n                  updateSortBy={this.updateSortBy}\n                />\n              </div>\n            </div>\n            <div className=\"row mt-2\">\n              <div className=\"col-7\">\n                Всего страниц: {this.state.total_pages}\n              </div>\n              <div className=\"col-5\">\n                <Pagination\n                  page={this.state.page}\n                  totalPages={this.state.total_pages}\n                  updatePage={this.updatePage}\n                />\n              </div>\n            </div>\n            <div className=\"row\">\n              {this.state.movies.map((m) => (\n                <div className=\"col-4 mb-4\" key={m.id}>\n                  <MovieItem\n                    movie={m}\n                    removeMovie={this.removeMovie}\n                    addMovieToWillWatch={this.addMovieToWillWatch}\n                    removeMovieFromWillWatch={this.removeMovieFromWillWatch}\n                  />\n                </div>\n              ))}\n            </div>\n          </div>\n          <div className=\"col-2\">\n            <h4>Will Watch: {this.state.willWatch.length}</h4>\n            <ul className=\"list-group\">\n              {this.state.willWatch.map((m) => (\n                <li key={m.id} className=\"list-group-item\">\n                  <div className=\"d-flex justify-content-between\">\n                    {m.title}\n                  </div>\n                </li>\n              ))}\n            </ul>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","export const API_URL = \"https://api.themoviedb.org/3\";\n\nexport const API_KEY_3 = \"3f4ca4f3a9750da53450646ced312397\";\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}