{"version":3,"sources":["MovieTabs.js","MovieItem.js","Pagination.js","App.js","api.js","index.js"],"names":["MovieTabs","nextProps","this","props","sort_by","updateSortBy","makeClasses","value","classNames","btn","active","handleClick","className","onClick","React","Component","MovieItem","state","willWatch","movie","title","vote_average","backdrop_path","poster_path","id","src","alt","type","setState","removeMovieFromWillWatch","addMovieToWillWatch","removeMovie","Pagination","currentPage","totalPages","from","to","pages","i","push","calculateStartPageButton","calculateEndPageButton","createPageButtonsRange","filter","p","updateCurrentPage","disabled","createPageButtons","map","page","App","fetchMovies","fetch","then","res","json","movies","results","total_pages","movieId","item","_","prevState","m","key","length","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8c758165.chunk.js","sourcesContent":["import React from \"react\";\nimport classNames from \"classnames\";\n\nexport default class MovieTabs extends React.Component {\n  shouldComponentUpdate(nextProps) {\n    return this.props.sort_by !== nextProps.sort_by\n  }\n\n  render() {\n    const { sort_by, updateSortBy } = this.props;\n    const makeClasses = (value) =>\n      classNames({\n        btn: true,\n        \"nav-link\": true,\n        active: value === sort_by,\n      });\n    const handleClick = (value) => () => updateSortBy(value);\n    return (\n      <ul className=\"nav nav-pills\">\n        <li className=\"nav-item\">\n          <button\n            className={makeClasses(\"popularity.desc\")}\n            onClick={handleClick(\"popularity.desc\")}\n          >\n            Popularity\n          </button>\n        </li>\n        <li className=\"nav-item\">\n          <button\n            className={makeClasses(\"revenue.desc\")}\n            onClick={handleClick(\"revenue.desc\")}\n          >\n            Revenue\n          </button>\n        </li>\n        <li className=\"nav-item\">\n          <button\n            className={makeClasses(\"vote_average.desc\")}\n            onClick={handleClick(\"vote_average.desc\")}\n          >\n            Vote average\n          </button>\n        </li>\n      </ul>\n    );\n  }\n}\n","import React from \"react\";\n\nexport class MovieItem extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      willWatch: false,\n    };\n  }\n\n  render() {\n    const {\n      title,\n      vote_average,\n      backdrop_path,\n      poster_path,\n      id,\n    } = this.props.movie;\n    return (\n      <div className=\"card\">\n        <img\n          className=\"card-img-top\"\n          src={`https://image.tmdb.org/t/p/w500${backdrop_path || poster_path}`}\n          alt={title}\n        />\n        <div className=\"card-body\">\n\n          <h6 className=\"card-title\">{title}</h6>\n          <p className=\"mb-2 d-flex justify-content-end\">Rating: {vote_average}</p>\n          <div className=\"d-flex justify-content-between align-items-center\">\n            {this.state.willWatch ? (\n              <button\n                type=\"button\"\n                className=\"btn btn-success\"\n                onClick={() => {\n                  this.setState({ willWatch: false });\n                  this.props.removeMovieFromWillWatch(id);\n                }}\n              >\n                Remove Will Watch\n              </button>\n            ) : (\n              <button\n                type=\"button\"\n                className=\"btn btn-secondary\"\n                onClick={() => {\n                  this.setState({ willWatch: true });\n                  this.props.addMovieToWillWatch(this.props.movie);\n                }}\n              >\n                Will Watch\n              </button>\n            )}\n            <button\n            className=\"btn btn-danger\"\n            onClick={() => this.props.removeMovie(id)}\n          >\n            Delete\n          </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport classNames from \"classnames\";\n\nexport class Pagination extends React.Component {\n  calculateStartPageButton() {\n    const { currentPage, totalPages } = this.props;\n\n    if (currentPage === 1) {\n      return currentPage;\n    } else if (currentPage === totalPages) {\n      return currentPage - 2;\n    } else {\n      return currentPage - 1;\n    }\n  }\n\n  calculateEndPageButton() {\n    const { currentPage, totalPages } = this.props;\n\n    if (currentPage === totalPages) {\n      return totalPages;\n    } else if (currentPage === 1) {\n      return currentPage + 2;\n    } else {\n      return currentPage + 1;\n    }\n  }\n\n  createPageButtonsRange(from, to) {\n    const pages = [];\n    for (let i = from; i <= to; i++) pages.push(i);\n\n    return pages;\n  }\n\n  createPageButtons() {\n    const { totalPages } = this.props;\n\n    const from = this.calculateStartPageButton();\n    const to = this.calculateEndPageButton();\n\n    return this.createPageButtonsRange(from, to).filter(\n      (p) => p >= 1 && p <= totalPages\n    );\n  }\n\n  render() {\n    const { currentPage, totalPages, updateCurrentPage } = this.props;\n\n    return (\n      <ul className=\"pagination justify-content-end\">\n        <li\n          className={classNames({\n            \"page-item\": true,\n            disabled: currentPage === 1,\n          })}\n        >\n          <button\n            className=\"page-link\"\n            onClick={() => updateCurrentPage(currentPage - 1)}\n          >\n            &laquo;\n          </button>\n        </li>\n        {this.createPageButtons().map((page) => (\n          <li\n            className={classNames({\n              \"page-item\": true,\n              active: currentPage === page,\n            })}\n          >\n            <button\n              className=\"page-link\"\n              onClick={() => updateCurrentPage(page)}\n            >\n              {page}\n            </button>\n          </li>\n        ))}\n        <li\n          className={classNames({\n            \"page-item\": true,\n            disabled: currentPage === totalPages,\n          })}\n        >\n          <button\n            className=\"page-link\"\n            onClick={() => updateCurrentPage(currentPage + 1)}\n          >\n            &raquo;\n          </button>\n        </li>\n      </ul>\n    );\n  }\n}\n","import React from \"react\";\nimport MovieTabs from \"./MovieTabs\";\nimport { MovieItem } from \"./MovieItem\";\nimport { Pagination } from \"./Pagination\";\nimport { API_URL, API_KEY_3 } from \"./api\";\n\nexport class App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      movies: [],\n      willWatch: [],\n      sort_by: \"popularity.desc\",\n      currentPage: 1,\n      total_pages: null,\n    };\n  }\n\n  componentDidMount() {\n    this.fetchMovies();\n  }\n\n  componentDidUpdate(_, prevState) {\n    if (\n      prevState.sort_by !== this.state.sort_by ||\n      prevState.currentPage !== this.state.currentPage\n    ) {\n      this.fetchMovies();\n    }\n  }\n\n  fetchMovies = () => {\n    fetch(\n      `${API_URL}/discover/movie?api_key=${API_KEY_3}&sort_by=${this.state.sort_by}&page=${this.state.currentPage}`\n    )\n      .then((res) => res.json())\n      .then(({ results: movies, total_pages }) =>\n        this.setState({ movies, total_pages })\n      );\n  };\n\n  addMovieToWillWatch = (movie) => {\n    this.setState({\n      willWatch: [...this.state.willWatch, movie],\n    });\n  };\n\n  removeMovieFromWillWatch = (movieId) => {\n    this.setState({\n      willWatch: this.state.willWatch.filter((item) => item.id !== movieId),\n    });\n  };\n\n  removeMovie = (movieId) => {\n    this.removeMovieFromWillWatch(movieId);\n    this.setState({\n      movies: this.state.movies.filter((item) => item.id !== movieId),\n    });\n  };\n\n  updateSortBy = (sort_by) => {\n    this.setState({ sort_by, currentPage: 1 });\n  };\n\n  updateCurrentPage = (currentPage) => {\n    this.setState({ currentPage });\n  };\n\n  render() {\n    return (\n      <div className=\"container\">\n        <div className=\"row mt-4\">\n          <div className=\"col-10\">\n            <div className=\"row mb-4\">\n              <div className=\"col-12\">\n                <MovieTabs\n                  sort_by={this.state.sort_by}\n                  updateSortBy={this.updateSortBy}\n                />\n              </div>\n            </div>\n            <div className=\"row mt-2\">\n              <div className=\"col-7\">\n                Всего страниц: {this.state.total_pages}\n              </div>\n              <div className=\"col-5\">\n                <Pagination\n                  currentPage={this.state.currentPage}\n                  totalPages={this.state.total_pages}\n                  updateCurrentPage={this.updateCurrentPage}\n                />\n              </div>\n            </div>\n            <div className=\"row\">\n              {this.state.movies.map((m) => (\n                <div className=\"col-4 mb-4\" key={m.id}>\n                  <MovieItem\n                    movie={m}\n                    removeMovie={this.removeMovie}\n                    addMovieToWillWatch={this.addMovieToWillWatch}\n                    removeMovieFromWillWatch={this.removeMovieFromWillWatch}\n                  />\n                </div>\n              ))}\n            </div>\n          </div>\n          <div className=\"col-2\">\n            <h4>Will Watch: {this.state.willWatch.length}</h4>\n            <ul className=\"list-group\">\n              {this.state.willWatch.map((m) => (\n                <li className=\"list-group-item\">\n                  <div className=\"d-flex justify-content-between\">\n                    {m.title}\n                  </div>\n                </li>\n              ))}\n            </ul>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","export const API_URL = \"https://api.themoviedb.org/3\";\n\nexport const API_KEY_3 = \"3f4ca4f3a9750da53450646ced312397\";\n\nexport const API_KEY_4 =\n  \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzZjRjYTRmM2E5NzUwZGE1MzQ1MDY0NmNlZDMxMjM5NyIsInN1YiI6IjVhYzlmNWRkOTI1MTQxNjJhZTA1Njk0NiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.Fc4f9DVB6pFWh6hIjYe0NCC4pImdmNzDIfi_3Nb3tC4\";\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}